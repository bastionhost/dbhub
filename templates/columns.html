{% load render_table from django_tables2 %}
<!doctype html>
<html>
<head>
    <title>{{ title }}</title>
    <link href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAQAABILAAASCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADVlx0C2JceNtiXHnbZmB6k2ZcewNmXHs3Zlx7Q2ZcewNiXHqHYlx532JceONaWHgIAAAAAAAAAANKTHgHTlB5g05Qe3dWVHv/VlR7/1pUe/9aVHv/WlR7/1pUe/9aVHv/UlR7/1ZUe/9OUHv/TlB7f0ZIdZ9GTHgLPkR2E0ZId/9CSHf/Skx7/0pMd/9KTHf/TlB7/05Qe/9OUHv/TlB7/0pMd/9KTHf/Qkh3/0JId/86RHf/Mjx2RzI8d8M6RHf/OkB3/0JEd/9CRHf/PkR3/0ZId/9GSHf/Rkh3/z5Ed/8+RHf/QkR3/zpAd/86QHf/Mjx3/yo0d9cuOHffNjx3/zI8d/86QHf/OkB3/zpAd/8+RHf/PkR3/z5Ed/86QHf/OkB3/zpAd/8yPHf/Mjx3/yo4d/8iMHPnJjR33yY0d/8uPHf/NkB3/zY8d/82PHf/OkB3/zpAd/86QHf/Mjx3/zY8d/82PHf/Ljh3/y44d/8mNHP/Hixz5yY0d98mNHP/Ljh3/yo4d/8yPHf/Mjx3/zI8d/82QHf/Mjx3/zI8d/8yPHf/Mjx3/yo4d/8uOHf/JjRz/xosc+caLHPfJjR3/y44d/8iLHP/BgRf/ungT/7VzEf+zcBD/s3AQ/7VyEf+5dxP/wIAW/8iLG//IjRz/yY0d/8aLHPnHjBz3v4AX/7BsDv+qZQv/sm4P/7l3E/++fRb/wIAX/8B/F/+8exX/t3QS/61pDf+mYQn/q2cM/75/F//HjBz5tHMS96hjCv+3dRL/xIUZ/9KWIP/doyb/5q4q/+qzLf/qsy3/5Kwq/9uhJf/Okh//woIY/7JwEP+iXQn/s3IR+aJbB/qybg//w4MY/9OWIP/jqin/8rwx///OOP//3T///90////OOP/yvDD/4ago/9KVIP/BgRf/r2wP/6FbB/ugWAWormcM/7x5FP/MjBv/2Z0j/+etKv/yui//+MMz//nDM//zvDD/6a8q/9ufJP/Ojhz/vnwV/61oDf+fWAaonVMCBqNZBXupYQjrtW4O/797E//Jhhj/z44c/9OSHf/Tkx7/0ZAc/8uJGf/CfhX/uHIQ/61lCuukXAd7nlUEBgAAAAAAAAAAn1ICBqVYBESoXAaArWIIqbBlCcOxZwrQsWcK0LFmCsOuYwmpq2AHgKZbBUSjWAQGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//8AAMADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAwAA//8AAA=="
          rel="icon" type="image/x-icon">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.3.0/semantic.min.js"></script>
    <link rel="stylesheet" type="text/css"
          href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.3.0/semantic.min.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css" rel="stylesheet"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>
</head>
<body>
<div class="ui container">
    {% block body %}
        <h1 id="title"><a href="/">{{ title }}</a></h1>
        <form action="" method="get" class="ui form dropdown">
            <div class="inline field">
                {{ filter.form.as_p }}
                <button class="ui green button" type="submit">Search</button>
            </div>
        </form>
        {% if user.is_authenticated %}
            <h3 id="login">Welcome '{{ user.username }}'</h3>
        {% else %}
            {% if enable_oauth %}
                <h3 id="login"><a href="/oauth/login/">Login</a></h3>
            {% else %}
                <h3 id="login"><a href="/admin/login/">Login</a></h3>
            {% endif %}
        {% endif %}
        {% if user.is_authenticated %}
            {% render_table table %}
        {% else %}
            <h1 style="text-align:center;">Please login to view!</h1>
        {% endif %}
    {% endblock %}
    <di class="footer">
        <span><a href="https://github.com/huifenqi/dbhub">DBHUB</a> is built with <3 using Django & maintained by <a href="https://github.com/iamsk">iamsk</a>.</span>
    </di>
</div>
</body>
<style>
    #title {
        margin-top: 10px;
    }

    #login {
        margin-top: 10px;
        margin-right: 50px;
        float: right;
    }

    #id_word {
        margin-bottom: 10px;
    }

    @media only screen and (min-width: 1500px) {
        .ui.container {
            width: 1427px;
            margin-left: auto !important;
            margin-right: auto !important;
        }
    }

    @media only screen and (min-width: 1800px) {
        .ui.container {
            width: 1727px;
            margin-left: auto !important;
            margin-right: auto !important;
        }
    }

    .select2-selection.select2-selection--single {
        height: 38px;
    }

    .select2-container--default .select2-selection--single .select2-selection__rendered {
        line-height: 38px;
    }

    .select2-container--default .select2-selection--single {
        border: 1px solid rgba(34,36,38,0.15);
    }
</style>
<script>
    $(document).ready(function () {
        $('#id_table').select2({
            placeholder: "Select a table",
            allowClear: true,
            ajax: {
                url: '/autocomplete/',
                dataType: 'json',
                data: function (params) {
                    database = $("#id_database").val();
                    return {
                        q: params.term, // search term
                        database: database,
                        page: params.page
                    };
                },
            }
        });
    });
    $('#id_database').addClass('ui dropdown');
    $('#id_database').css({'width': '200px'});
    $('#id_word').parent('p').css({'vertical-align': 'top'});
    $('#id_word').css({'height': '38px', 'width': '300px'});
    $('.ui.form .inline.field>:first-child').css({'margin': '0 1px 0 0'});
    $('.ui.form .inline.field>:nth-child(2)').css({'position': 'relative', 'top': '-1px'});
</script>
</html>
